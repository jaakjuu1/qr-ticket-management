{"version":3,"sources":["pages/Home.js","services/api.js","pages/Login.js","pages/Register.js","pages/Dashboard.js","pages/DeviceManager.js","pages/AdminPanel.js","pages/Unauthorized.js","components/ProtectedRoute.js","components/Navigation.js","App.js","index.js"],"names":["Home","_jsx","children","api","axios","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","error","Promise","reject","Login","username","setUsername","useState","password","setPassword","setError","history","useHistory","useEffect","push","_jsxs","className","onSubmit","async","e","preventDefault","response","login","post","setItem","data","err","type","value","onChange","target","required","Register","role","setRole","style","color","register","console","log","Dashboard","tickets","setTickets","deviceId","setDeviceId","fetchTickets","get","purchaseTicket","map","ticket","qrCode","status","id","DeviceManager","setQrCode","message","setMessage","validateTicket","placeholder","AdminPanel","analytics","setAnalytics","users","setUsers","fetchAnalytics","fetchUsers","handleRoleChange","userId","newRole","updateUserRole","patch","totalUsers","totalTickets","activeTickets","user","Unauthorized","Link","to","ProtectedRoute","_ref","component","Component","roles","rest","isAuthenticated","userRole","decodedToken","jwtDecode","Route","render","props","includes","Redirect","pathname","state","from","location","Navigation","_Fragment","onClick","handleLogout","removeItem","window","href","App","Router","Switch","exact","path","ReactDOM","React","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.68a1cee3.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nfunction Home() {\r\n  return (\r\n    <div>\r\n      <h1>Welcome to QR Ticket Manager</h1>\r\n      {/* Add more content here */}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Home;","import axios from 'axios';\r\n\r\nconst API_URL = 'http://localhost:3000/api';\r\n\r\nconst api = axios.create({\r\n  baseURL: API_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\n// Add a request interceptor to include the token in the header\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      config.headers['Authorization'] = `Bearer ${token}`;\r\n    }\r\n    return config;\r\n  },\r\n  (error) => Promise.reject(error)\r\n);\r\n\r\nexport const login = (username, password) => {\r\n  return api.post('/auth/login', { username, password });\r\n};\r\n\r\nexport const register = (username, password, role) => {\r\n  return api.post('/auth/register', { username, password, role });\r\n};\r\n\r\nexport const purchaseTicket = (deviceId) => {\r\n  return api.post('/tickets/purchase', { deviceId });\r\n};\r\n\r\nexport const getMyTickets = () => {\r\n  return api.get('/tickets/my-tickets');\r\n};\r\n\r\nexport const validateTicket = (qrCode) => {\r\n  return api.post('/tickets/validate', { qrCode });\r\n};\r\n\r\nexport const getAnalytics = () => {\r\n  return api.get('/admin/analytics');\r\n};\r\n\r\nexport const getAllUsers = () => {\r\n  return api.get('/admin/users');\r\n};\r\n\r\nexport const updateUserRole = (userId, role) => {\r\n  return api.patch(`/admin/users/${userId}`, { role });\r\n};\r\n\r\nexport default api;","import React, { useState, useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { login } from '../services/api';\r\n\r\nfunction Login() {\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState('');\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    if (localStorage.getItem('token')) {\r\n      history.push('/dashboard');\r\n    }\r\n  }, [history]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const response = await login(username, password);\r\n      localStorage.setItem('token', response.data.token);\r\n      history.push('/dashboard');\r\n    } catch (err) {\r\n      setError('Invalid username or password');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-md mx-auto\">\r\n      <h2 className=\"text-2xl font-bold mb-4\">Login</h2>\r\n      {error && <p className=\"text-red-500 mb-4\">{error}</p>}\r\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n        <div>\r\n          <label className=\"block mb-1\">Username:</label>\r\n          <input\r\n            type=\"text\"\r\n            value={username}\r\n            onChange={(e) => setUsername(e.target.value)}\r\n            required\r\n            className=\"w-full px-3 py-2 border rounded\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <label className=\"block mb-1\">Password:</label>\r\n          <input\r\n            type=\"password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            required\r\n            className=\"w-full px-3 py-2 border rounded\"\r\n          />\r\n        </div>\r\n        <button type=\"submit\" className=\"w-full bg-blue-500 text-white py-2 rounded hover:bg-blue-600\">Login</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;","import React, { useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { register } from '../services/api';\r\n\r\nfunction Register() {\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [role, setRole] = useState('basic');\r\n  const [error, setError] = useState('');\r\n  const history = useHistory();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      await register(username, password, role);\r\n      history.push('/login');\r\n    } catch (err) {\r\n      console.log(err);\r\n      setError('Registration failed. Please try again.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Register</h2>\r\n      {error && <p style={{ color: 'red' }}>{error}</p>}\r\n      <form onSubmit={handleSubmit}>\r\n        <div>\r\n          <label>Username:</label>\r\n          <input\r\n            type=\"text\"\r\n            value={username}\r\n            onChange={(e) => setUsername(e.target.value)}\r\n            required\r\n          />\r\n        </div>\r\n        <div>\r\n          <label>Password:</label>\r\n          <input\r\n            type=\"password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            required\r\n          />\r\n        </div>\r\n        <div>\r\n          <label>Role:</label>\r\n          <select value={role} onChange={(e) => setRole(e.target.value)}>\r\n            <option value=\"basic\">Basic</option>\r\n            <option value=\"device_manager\">Device Manager</option>\r\n            <option value=\"admin\">Admin</option>\r\n          </select>\r\n        </div>\r\n        <button type=\"submit\">Register</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Register;","import React, { useState, useEffect } from 'react';\r\nimport { getMyTickets, purchaseTicket } from '../services/api';\r\n\r\nfunction Dashboard() {\r\n  const [tickets, setTickets] = useState([]);\r\n  const [deviceId, setDeviceId] = useState('');\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    fetchTickets();\r\n  }, []);\r\n\r\n  const fetchTickets = async () => {\r\n    try {\r\n      const response = await getMyTickets();\r\n      setTickets(response.data);\r\n    } catch (err) {\r\n      setError('Failed to fetch tickets');\r\n    }\r\n  };\r\n\r\n  const handlePurchase = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      await purchaseTicket(deviceId);\r\n      fetchTickets();\r\n      setDeviceId('');\r\n    } catch (err) {\r\n      setError('Failed to purchase ticket');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2 className=\"text-2xl font-bold mb-4\">Dashboard</h2>\r\n      {error && <p className=\"text-red-500 mb-4\">{error}</p>}\r\n      <div className=\"mb-8\">\r\n        <h3 className=\"text-xl font-semibold mb-2\">Purchase Ticket</h3>\r\n        <form onSubmit={handlePurchase} className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block mb-1\">Device ID:</label>\r\n            <input\r\n              type=\"text\"\r\n              value={deviceId}\r\n              onChange={(e) => setDeviceId(e.target.value)}\r\n              required\r\n              className=\"w-full px-3 py-2 border rounded\"\r\n            />\r\n          </div>\r\n          <button type=\"submit\" className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600\">Purchase Ticket</button>\r\n        </form>\r\n      </div>\r\n      <div>\r\n        <h3 className=\"text-xl font-semibold mb-2\">My Tickets</h3>\r\n        <ul className=\"space-y-2\">\r\n          {tickets.map((ticket) => (\r\n            <li key={ticket.id} className=\"bg-white p-4 rounded shadow\">\r\n              <p>QR Code: {ticket.qrCode}</p>\r\n              <p>Status: <span className={`font-semibold ${ticket.status === 'active' ? 'text-green-500' : 'text-red-500'}`}>{ticket.status}</span></p>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Dashboard;","import React, { useState } from 'react';\r\nimport { validateTicket } from '../services/api';\r\n\r\nfunction DeviceManager() {\r\n  const [qrCode, setQrCode] = useState('');\r\n  const [message, setMessage] = useState('');\r\n\r\n  const handleValidate = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      await validateTicket(qrCode);\r\n      setMessage('Ticket validated successfully');\r\n      setQrCode('');\r\n    } catch (error) {\r\n      setMessage('Failed to validate ticket');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Device Manager</h2>\r\n      <form onSubmit={handleValidate}>\r\n        <input\r\n          type=\"text\"\r\n          value={qrCode}\r\n          onChange={(e) => setQrCode(e.target.value)}\r\n          placeholder=\"Enter QR Code\"\r\n          required\r\n        />\r\n        <button type=\"submit\">Validate Ticket</button>\r\n      </form>\r\n      {message && <p>{message}</p>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DeviceManager;","import React, { useState, useEffect } from 'react';\r\nimport { getAnalytics, getAllUsers, updateUserRole } from '../services/api';\r\n\r\nfunction AdminPanel() {\r\n  const [analytics, setAnalytics] = useState(null);\r\n  const [users, setUsers] = useState([]);\r\n\r\n  useEffect(() => {\r\n    fetchAnalytics();\r\n    fetchUsers();\r\n  }, []);\r\n\r\n  const fetchAnalytics = async () => {\r\n    try {\r\n      const response = await getAnalytics();\r\n      setAnalytics(response.data);\r\n    } catch (error) {\r\n      console.error('Failed to fetch analytics', error);\r\n    }\r\n  };\r\n\r\n  const fetchUsers = async () => {\r\n    try {\r\n      const response = await getAllUsers();\r\n      setUsers(response.data);\r\n    } catch (error) {\r\n      console.error('Failed to fetch users', error);\r\n    }\r\n  };\r\n\r\n  const handleRoleChange = async (userId, newRole) => {\r\n    try {\r\n      await updateUserRole(userId, newRole);\r\n      fetchUsers(); // Refresh user list\r\n    } catch (error) {\r\n      console.error('Failed to update user role', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Admin Panel</h2>\r\n      {analytics && (\r\n        <div>\r\n          <h3>Analytics</h3>\r\n          <p>Total Users: {analytics.totalUsers}</p>\r\n          <p>Total Tickets: {analytics.totalTickets}</p>\r\n          <p>Active Tickets: {analytics.activeTickets}</p>\r\n        </div>\r\n      )}\r\n      <h3>User Management</h3>\r\n      <ul>\r\n        {users.map(user => (\r\n          <li key={user.id}>\r\n            {user.username} - Current Role: {user.role}\r\n            <select\r\n              value={user.role}\r\n              onChange={(e) => handleRoleChange(user.id, e.target.value)}\r\n            >\r\n              <option value=\"basic\">Basic</option>\r\n              <option value=\"device_manager\">Device Manager</option>\r\n              <option value=\"admin\">Admin</option>\r\n            </select>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AdminPanel;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction Unauthorized() {\r\n  return (\r\n    <div>\r\n      <h2>Unauthorized Access</h2>\r\n      <p>You do not have permission to view this page.</p>\r\n      <Link to=\"/dashboard\">Return to Dashboard</Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Unauthorized;","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { jwtDecode } from 'jwt-decode';\r\n\r\nconst ProtectedRoute = ({ component: Component, roles, ...rest }) => {\r\n  const token = localStorage.getItem('token');\r\n  const isAuthenticated = !!token;\r\n  \r\n  let userRole = null;\r\n  if (isAuthenticated) {\r\n    const decodedToken = jwtDecode(token);\r\n    userRole = decodedToken.role;\r\n  }\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) =>\r\n        isAuthenticated ? (\r\n          roles && !roles.includes(userRole) ? (\r\n            <Redirect to=\"/unauthorized\" />\r\n          ) : (\r\n            <Component {...props} />\r\n          )\r\n        ) : (\r\n          <Redirect\r\n            to={{\r\n              pathname: \"/login\",\r\n              state: { from: props.location }\r\n            }}\r\n          />\r\n        )\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\nexport default ProtectedRoute;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { jwtDecode } from 'jwt-decode';\r\n\r\nconst Navigation = () => {\r\n  const token = localStorage.getItem('token');\r\n  const isAuthenticated = !!token;\r\n  \r\n  let userRole = null;\r\n  if (isAuthenticated) {\r\n    const decodedToken = jwtDecode(token);\r\n    userRole = decodedToken.role;\r\n  }\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('token');\r\n    window.location.href = '/login';\r\n  };\r\n\r\n  return (\r\n    <nav className=\"bg-blue-600 text-white p-4\">\r\n      <ul className=\"flex space-x-4\">\r\n        <li><Link to=\"/\" className=\"hover:text-blue-200\">Home</Link></li>\r\n        {!isAuthenticated && (\r\n          <>\r\n            <li><Link to=\"/login\" className=\"hover:text-blue-200\">Login</Link></li>\r\n            <li><Link to=\"/register\" className=\"hover:text-blue-200\">Register</Link></li>\r\n          </>\r\n        )}\r\n        {isAuthenticated && (\r\n          <>\r\n            <li><Link to=\"/dashboard\" className=\"hover:text-blue-200\">Dashboard</Link></li>\r\n            {(userRole === 'device_manager' || userRole === 'admin') && (\r\n              <li><Link to=\"/device-manager\" className=\"hover:text-blue-200\">Device Manager</Link></li>\r\n            )}\r\n            {userRole === 'admin' && (\r\n              <li><Link to=\"/admin\" className=\"hover:text-blue-200\">Admin Panel</Link></li>\r\n            )}\r\n            <li><button onClick={handleLogout} className=\"hover:text-blue-200\">Logout</button></li>\r\n          </>\r\n        )}\r\n      </ul>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Navigation;","import React from 'react';\r\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\r\nimport Home from './pages/Home';\r\nimport Login from './pages/Login';\r\nimport Register from './pages/Register';\r\nimport Dashboard from './pages/Dashboard';\r\nimport DeviceManager from './pages/DeviceManager';\r\nimport AdminPanel from './pages/AdminPanel';\r\nimport Unauthorized from './pages/Unauthorized';\r\nimport ProtectedRoute from './components/ProtectedRoute';\r\nimport Navigation from './components/Navigation';\r\n\r\nfunction App() {\r\n  return (\r\n    <Router>\r\n      <div className=\"min-h-screen bg-gray-100\">\r\n        <Navigation />\r\n        <div className=\"container mx-auto px-4 py-8\">\r\n          <Switch>\r\n            <Route exact path=\"/\" component={Home} />\r\n            <Route path=\"/login\" component={Login} />\r\n            <Route path=\"/register\" component={Register} />\r\n            <Route path=\"/unauthorized\" component={Unauthorized} />\r\n            <ProtectedRoute path=\"/dashboard\" component={Dashboard} roles={['basic', 'device_manager', 'admin']} />\r\n            <ProtectedRoute path=\"/device-manager\" component={DeviceManager} roles={['device_manager', 'admin']} />\r\n            <ProtectedRoute path=\"/admin\" component={AdminPanel} roles={['admin']} />\r\n          </Switch>\r\n        </div>\r\n      </div>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}